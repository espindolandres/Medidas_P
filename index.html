<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#1976D2" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="description" content="Calculadora m√≥vil de niveles de tanques con interpolaci√≥n/extrapolaci√≥n controlada, tabla y hist√≥rico." />
  <title>Medidas de Tanques</title>

  <style>
    :root{
      --primary:#1976D2;
      --primary-hover:#1565c0;

      --bg1:#f4f7fb;
      --bg2:#ffffff;

      --text:#0f172a;
      --muted:#64748b;
      --border:#d7dde6;

      --success:#1b7f3a;
      --warning:#a84b2f;
      --error:#c62828;

      --shadow: 0 12px 35px rgba(2, 6, 23, 0.10);
      --radius: 14px;

      --s4:4px; --s8:8px; --s12:12px; --s16:16px; --s20:20px; --s24:24px; --s32:32px;

      --font: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--font);
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 10% 10%, #eef6fb 0%, transparent 60%),
        radial-gradient(1000px 600px at 90% 0%, #f2f4ff 0%, transparent 55%),
        linear-gradient(135deg, #f7fbff 0%, #e8f0fb 100%);
      padding: clamp(12px, 3.2vw, 24px);
      -webkit-text-size-adjust: 100%;
    }

    .container{
      max-width: 980px;
      margin: 0 auto;
      padding-bottom: calc(92px + env(safe-area-inset-bottom));
    }

    header{
      display:flex; align-items:flex-start; justify-content:space-between;
      gap: var(--s16);
      margin-bottom: var(--s16);
    }

    h1{
      margin:0;
      font-size: clamp(1.25rem, 3.6vw, 2.0rem);
      letter-spacing:-0.02em;
      line-height:1.15;
      color: var(--primary);
    }
    .subtitle{
      margin: 8px 0 0;
      color: var(--muted);
      font-size: 0.98rem;
      line-height: 1.4;
      max-width: 820px;
    }

    main{display:grid; gap: var(--s16);}

    .card{
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: var(--s20);
    }

    .card-head{
      display:flex; align-items:flex-start; justify-content:space-between;
      gap: var(--s12);
      margin-bottom: var(--s12);
    }
    .card h2{
      margin:0;
      font-size:1.08rem;
      letter-spacing:-0.01em;
    }
    .muted{margin: 6px 0 0; color: var(--muted); font-size: 0.95rem; line-height:1.4}

    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: var(--s12);
      margin-top: var(--s12);
    }
    .col-12{grid-column: span 12;}
    .col-6{grid-column: span 6;}

    .field{display:flex; flex-direction:column; gap: var(--s8);}
    label{font-weight: 900; font-size: 0.93rem;}
    .help{margin:0; color: var(--muted); font-size: 0.88rem; line-height: 1.35;}

    input, select, button{
      font-family: var(--font);
      font-size: 16px; /* evita zoom en iOS */
    }
    input, select{
      width:100%;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #fbfcfe;
      transition: border-color .15s, box-shadow .15s, background-color .15s;
    }
    input:focus, select:focus, button:focus{
      outline:none;
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(25,118,210,0.16);
    }

    select{
      appearance:none;
      background-image:
        linear-gradient(45deg, transparent 50%, #0f172a 50%),
        linear-gradient(135deg, #0f172a 50%, transparent 50%);
      background-position:
        calc(100% - 18px) calc(1em + 2px),
        calc(100% - 13px) calc(1em + 2px);
      background-size: 5px 5px, 5px 5px;
      background-repeat: no-repeat;
      padding-right: 36px;
    }

    .invalid{
      border-color: rgba(198, 40, 40, 0.55) !important;
      box-shadow: 0 0 0 4px rgba(198, 40, 40, 0.12) !important;
      background: #fff7f7;
    }

    .row{display:flex; gap: var(--s12); align-items:center; flex-wrap:wrap;}

    .toggle{
      display:flex; align-items:center; gap: var(--s8);
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #f6f8fc;
      color: var(--text);
      font-weight: 900;
      cursor:pointer;
      user-select:none;
    }
    .toggle input{width:auto; margin:0;}

    .btns{display:flex; flex-wrap:wrap; gap: var(--s12); align-items:center;}
    button{
      border:none;
      border-radius: 12px;
      padding: 12px 14px;
      cursor:pointer;
      font-weight: 950;
      transition: transform .08s, background-color .15s, opacity .15s;
      user-select:none;
      touch-action: manipulation;
    }
    button:active{transform: translateY(1px);}
    button:disabled{opacity:0.55; cursor:not-allowed; transform:none;}

    .btn-primary{background: var(--primary); color:#fff;}
    .btn-primary:hover{background: var(--primary-hover);}
    .btn-secondary{background:#f3f6fb; color: var(--text); border: 1px solid var(--border);}
    .btn-secondary:hover{background:#edf2f8;}
    .btn-ghost{background: transparent; color: var(--text); border: 1px solid var(--border);}
    .btn-ghost:hover{background:#f6f8fc;}

    .alerts{margin-top: var(--s12); display:grid; gap: var(--s12);}
    .alert{
      border-radius: 12px;
      padding: 12px 14px;
      border: 1px solid var(--border);
      background: #fafcff;
      font-size: 0.92rem;
      line-height: 1.35;
    }
    .alert strong{font-weight: 950;}
    .alert.error{border-color: rgba(198, 40, 40, 0.35); background: rgba(198, 40, 40, 0.07);}
    .alert.warning{border-color: rgba(168, 75, 47, 0.35); background: rgba(168, 75, 47, 0.08);}
    .alert.info{border-color: rgba(25,118,210, 0.30); background: rgba(25,118,210, 0.07);}

    .result{
      margin-top: var(--s12);
      padding-top: var(--s12);
      border-top: 1px solid var(--border);
      display:none;
    }
    .result.active{display:block;}

    .metrics{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: var(--s12);
      margin-top: var(--s12);
    }
    .metric{
      grid-column: span 3;
      border: 1px solid #d8eef7;
      background: linear-gradient(135deg, #f4fbfe 0%, #f7fbff 100%);
      border-radius: 12px;
      padding: var(--s16);
      min-height: 74px;
    }
    .metric .k{color: var(--muted); font-size: 0.85rem; margin-bottom: var(--s4);}
    .metric .v{font-weight: 950; font-size: 1.05rem; letter-spacing: -0.01em;}
    .metric .sub{margin-top: var(--s4); font-size: 0.85rem; color: var(--muted); font-family: var(--mono);}

    .table-wrap{
      overflow:auto;
      margin-top: var(--s12);
      border: 1px solid var(--border);
      border-radius: 12px;
      background: #fff;
      max-height: 420px;
    }
    table{width:100%; border-collapse:collapse; min-width: 680px;}
    thead th{
      text-align:center;
      font-size: 0.85rem;
      color: #fff;
      background: var(--primary);
      border-bottom: 1px solid var(--border);
      padding: 12px 10px;
      position: sticky;
      top: 0;
      z-index: 1;
      white-space: nowrap;
    }
    tbody td{
      border-bottom: 1px solid #eef2f7;
      padding: 10px 10px;
      text-align:center;
      font-size: 0.92rem;
      white-space: nowrap;
    }
    tbody tr:nth-child(even){background:#fafafa;}
    tbody tr.highlight{
      background: rgba(255, 193, 7, 0.18) !important;
      outline: 2px solid rgba(255, 193, 7, 0.35);
      outline-offset: -2px;
    }

    .list-cards{
      display:grid;
      gap: var(--s12);
      margin-top: var(--s12);
    }
    .row-card{
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 12px 12px;
      background: #fff;
    }
    .row-card.highlight{
      border-color: rgba(255, 193, 7, 0.55);
      box-shadow: 0 0 0 4px rgba(255, 193, 7, 0.12);
      background: rgba(255, 193, 7, 0.08);
    }
    .row-main{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      align-items:center;
    }
    .kv .k{
      color: var(--muted);
      font-size: 0.82rem;
      margin-bottom: 2px;
    }
    .kv .v{
      font-weight: 950;
      font-size: 1.0rem;
    }
    .row-sub{
      margin-top: 8px;
      color: var(--muted);
      font-size: 0.9rem;
      display:flex;
      justify-content:space-between;
      gap: 10px;
      flex-wrap:wrap;
    }

    details.card{
      padding: 0;
      overflow: hidden;
    }
    details.card > summary{
      list-style:none;
      cursor:pointer;
      padding: var(--s20);
      user-select:none;
    }
    details.card > summary::-webkit-details-marker{display:none;}
    .summary-row{
      display:flex; align-items:flex-start; justify-content:space-between; gap: var(--s12);
    }
    .chev{
      width: 14px; height: 14px;
      border-right: 2px solid var(--muted);
      border-bottom: 2px solid var(--muted);
      transform: rotate(45deg);
      margin-top: 6px;
      transition: transform .15s;
      flex: 0 0 auto;
    }
    details[open] .chev{ transform: rotate(225deg); }

    .details-body{
      padding: 0 var(--s20) var(--s20);
      border-top: 1px solid var(--border);
    }

    .bottom-bar{
      position: fixed;
      left: 0; right: 0; bottom: 0;
      padding: 10px 12px calc(10px + env(safe-area-inset-bottom));
      background: rgba(255,255,255,0.92);
      backdrop-filter: blur(10px);
      border-top: 1px solid var(--border);
      display:flex;
      gap: 12px;
      z-index: 99;
    }
    .bottom-bar button{
      flex: 1;
      padding: 14px 14px;
      border-radius: 14px;
      font-size: 16px;
    }

    footer{
      margin-top: var(--s16);
      text-align:center;
      color: var(--muted);
      font-size: 0.9rem;
      padding: var(--s16) 0;
      border-top: 1px solid var(--border);
    }
    footer strong{color: var(--text);}

    @media (max-width: 920px){
      header{flex-direction:column; align-items:flex-start;}
      .col-6{grid-column: span 12;}
      .metric{grid-column: span 6;}
      table{min-width: 640px;}
    }
    @media (min-width: 900px){
      .container{ padding-bottom: 0; }
      .bottom-bar{ display:none; }
    }
    @media (prefers-reduced-motion: reduce){
      *{transition:none !important;}
      button:active{transform:none;}
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <div>
        <h1>Medidas de Tanques</h1>
        <p class="subtitle">
          Calcula por <strong>interpolaci√≥n lineal</strong> usando tu tabla de calibraci√≥n.
          Si activas extrapolaci√≥n, se permite un margen de <strong>¬±2 cm</strong> (resultado estimado).
        </p>
      </div>
      <!-- ‚úÖ Se elimin√≥ la ‚Äúpill‚Äù que ocupaba espacio en m√≥vil -->
    </header>

    <main>
      <section class="card" aria-labelledby="hEntrada">
        <div class="card-head">
          <div>
            <h2 id="hEntrada">1) Selecci√≥n y c√°lculo</h2>
            <p class="muted">Elige el tanque, el modo y escribe un valor.</p>
          </div>
          <div class="btns">
            <button class="btn-ghost" id="btnResetState" type="button">Restablecer</button>
          </div>
        </div>

        <div class="grid">
          <div class="field col-6">
            <label for="tanque">Tanque</label>
            <select id="tanque"></select>
            <p class="help" id="tankMeta">‚Äî</p>
          </div>

          <div class="field col-6">
            <label for="modo">Modo de c√°lculo</label>
            <select id="modo">
              <option value="altura">Altura (cm) ‚Üí Litros</option>
              <option value="litros">Litros ‚Üí Altura (cm)</option>
              <option value="vacio">Vac√≠o (cm) ‚Üí Litros</option>
            </select>
            <p class="help" id="modoHelp">‚Äî</p>
          </div>

          <div class="field col-12">
            <label id="valorLabel" for="valor">Valor</label>
            <input
              id="valor"
              type="text"
              inputmode="decimal"
              enterkeyhint="done"
              autocomplete="off"
              autocapitalize="off"
              autocorrect="off"
              spellcheck="false"
              placeholder="Ej: 39"
            />
            <p class="help" id="rango">‚Äî</p>

            <div class="row" style="margin-top: var(--s12);">
              <label class="toggle" title="Si est√° activo, se recalcula mientras escribes (sin guardar historial).">
                <input type="checkbox" id="autoCalc" />
                Vista previa autom√°tica
              </label>

              <label class="toggle" title="Permite extrapolar el c√°lculo hasta ¬±2 cm fuera del rango calibrado. El resultado ser√° estimado.">
                <input type="checkbox" id="allowExtrap" />
                Extrapolaci√≥n ¬±2 cm (estimado)
              </label>
            </div>
          </div>
        </div>

        <div class="btns" style="margin-top: var(--s16);">
          <button class="btn-primary" id="btnCalcular" type="button">Calcular y guardar</button>
          <button class="btn-secondary" id="btnLimpiar" type="button">Limpiar</button>
        </div>

        <div class="alerts">
          <div class="alert error" id="alertError" hidden></div>
          <div class="alert warning" id="alertWarning" hidden></div>
          <div class="alert info" id="alertInfo">
            <strong>Nota:</strong> Por defecto solo se calcula dentro del rango calibrado. Si activas extrapolaci√≥n, se permite un margen controlado (¬±2 cm).
          </div>
        </div>

        <div class="result" id="resultado" aria-live="polite">
          <div class="alert info" style="margin-top: var(--s16);">
            <strong id="resTitulo">Resultado</strong>
            <div class="help" id="resSubtitulo" style="margin-top:6px;">‚Äî</div>
          </div>

          <div class="metrics">
            <div class="metric">
              <div class="k">Altura (cm)</div>
              <div class="v" id="outAltura">‚Äî</div>
              <div class="sub" id="outAlturaSub">‚Äî</div>
            </div>
            <div class="metric">
              <div class="k">Litros (L)</div>
              <div class="v" id="outLitros">‚Äî</div>
              <div class="sub" id="outLitrosSub">‚Äî</div>
            </div>
            <div class="metric">
              <div class="k">Vac√≠o (cm)</div>
              <div class="v" id="outVacio">‚Äî</div>
              <div class="sub" id="outVacioSub">‚Äî</div>
            </div>
            <div class="metric">
              <div class="k">% de capacidad</div>
              <div class="v" id="outPct">‚Äî</div>
              <div class="sub" id="outPctSub">‚Äî</div>
            </div>
          </div>

          <div class="help" id="toast" style="margin-top: var(--s12); color: var(--muted);"></div>
        </div>
      </section>

      <details class="card" id="detailsTable" open>
        <summary>
          <div class="summary-row">
            <div>
              <h2>2) Tabla del tanque seleccionado</h2>
              <p class="muted">En m√≥vil se muestra en tarjetas (m√°s c√≥modo).</p>
            </div>
            <div class="chev" aria-hidden="true"></div>
          </div>
        </summary>

        <div class="details-body">
          <div class="row">
            <div class="field" style="min-width:220px; flex:1;">
              <label for="filtroCampo">Filtrar por</label>
              <select id="filtroCampo">
                <option value="altura">Altura (cm)</option>
                <option value="litros">Litros (L)</option>
              </select>
            </div>
            <div class="field" style="min-width:260px; flex:2;">
              <label for="filtroValor">Valor del filtro</label>
              <input id="filtroValor" type="text" inputmode="decimal" placeholder="Ej: 39 o 400" />
              <p class="help">Deja vac√≠o para ver toda la tabla.</p>
            </div>
            <div class="btns">
              <button class="btn-ghost" id="btnFiltroLimpiar" type="button">Limpiar filtro</button>
              <button class="btn-secondary" id="btnTablaCsv" type="button">Exportar tabla CSV</button>
            </div>
          </div>

          <div id="tablaDatos" style="margin-top: var(--s12);" role="region" aria-label="Tabla calibraci√≥n"></div>
        </div>
      </details>

      <details class="card" id="detailsHistory" open>
        <summary>
          <div class="summary-row">
            <div>
              <h2>3) Hist√≥rico (√∫ltimos 20)</h2>
              <p class="muted">En m√≥vil se ve como tarjetas. Copiar / CSV disponible.</p>
            </div>
            <div class="chev" aria-hidden="true"></div>
          </div>
        </summary>

        <div class="details-body">
          <div class="btns" style="margin-top: var(--s12);">
            <button class="btn-secondary" id="btnHistCopy" type="button">üìã Copiar</button>
            <button class="btn-secondary" id="btnHistCsv" type="button">‚¨áÔ∏è CSV</button>
            <button class="btn-ghost" id="btnHistClear" type="button">Limpiar</button>
          </div>

          <div id="historial" style="margin-top: var(--s12);" role="region" aria-label="Hist√≥rico"></div>
        </div>
      </details>
    </main>

    <footer>
      ¬© <span id="anio"></span> ‚Äì Desarrollado por <strong>Andres Felipe Gonzalez Espindola</strong>
    </footer>
  </div>

  <div class="bottom-bar" aria-label="Acciones r√°pidas">
    <button class="btn-primary" id="btnCalcularBottom" type="button">Calcular</button>
    <button class="btn-secondary" id="btnLimpiarBottom" type="button">Limpiar</button>
  </div>

  <script>
    (() => {
      "use strict";

      const MAX_HIST = 20;
      const LS_STATE = "tankcalc_state_v3";
      const LS_HIST  = "tankcalc_history_v3";
      const EXTRAP_TOL_CM = 2;

      const mqMobile = window.matchMedia("(max-width: 720px)");

      const DATA = {
        "250L":[[4.5,10],[9,20],[13,30],[17,40],[21,50],[25,60],[28.5,70],[32,80],[35.5,90],[39,100],[42.5,110],[46,120],[49,130],[52,140],[56,150],[59,160],[62,170],[65,180],[68,190],[71,200],[74,210],[76.5,220],[79,230],[81,240],[83,250]],
        "500L":[[0,0],[21,100],[30.5,150],[40,200],[49,250],[58,300],[66,350],[74,400],[83.25,450],[92.5,500]],
        "1000L":[[13.5,100],[20.3,150],[27,200],[34.5,250],[42,300],[50,350],[58,400],[65,450],[72,500],[77,550],[82,600],[87.5,650],[93,700],[99,750],[105,800],[110,850],[115,900],[121,950],[127,1000]],
        "2000L":[[12,100],[18,150],[24,200],[31.1,250],[38.2,300],[39.9,350],[41.5,400],[45.9,450],[50.3,500],[54.5,550],[59,600],[63.5,650],[68,700],[72,750],[76.5,800],[80.2,850],[84,900],[89,950],[92,1000],[96,1050],[100,1100],[104,1150],[108,1200],[112,1250],[117,1300],[121,1350],[125,1400],[128,1450],[132,1500],[135,1550],[138,1600],[142,1650],[145,1700],[148.6,1750],[152,1800],[156,1850],[158,1900],[161,1950],[164,2000]],
        "5000L":[[2.5,50],[5,100],[7.5,150],[10,200],[12.5,250],[14.5,300],[16.5,350],[18.5,400],[22.2,450],[24.5,500],[26.7,550],[27.5,600],[29.2,650],[30.7,700],[32.3,750],[34,800],[36.5,850],[39,900],[41.5,950],[44,1000],[46,1050],[48,1100],[50,1150],[52,1200],[54.2,1250],[56.2,1300],[58.4,1350],[60.5,1400],[62.4,1450],[64.5,1500],[66.5,1550],[68,1600],[70,1650],[72,1700],[74,1750],[76,1800],[77.1,1850],[79.1,1900],[81.7,1950],[83.7,2000],[85.4,2050],[87.1,2100],[88.8,2150],[90.5,2200],[92.6,2250],[94.7,2300],[96.8,2350],[99,2400],[100.7,2450],[102.5,2500],[104.2,2550],[106,2600],[108,2650],[110,2700],[112,2750],[114,2800],[115.7,2850],[117.2,2900],[119.2,2950],[121,3000],[122.7,3050],[124.5,3100],[126.2,3150],[128,3200],[129.7,3250],[131.2,3300],[133.2,3350],[135,3400],[136.7,3450],[138.4,3500],[140.2,3550],[142,3600],[143.7,3650],[145.5,3700],[147.2,3750],[149,3800],[150.7,3850],[152.2,3900],[154.2,3950],[156,4000],[158,4050],[160,4100],[162,4150],[164,4200],[166.7,4250],[168.4,4300],[170.2,4350],[171,4400],[173,4450],[175,4500],[177,4550],[179,4600],[181,4650],[183,4700],[185,4750],[187,4800],[188.8,4850],[190.7,4900],[192.6,4950],[194.5,5000]]
      };

      const el = {
        tanque: document.getElementById("tanque"),
        modo: document.getElementById("modo"),
        valor: document.getElementById("valor"),
        valorLabel: document.getElementById("valorLabel"),
        rango: document.getElementById("rango"),
        tankMeta: document.getElementById("tankMeta"),
        modoHelp: document.getElementById("modoHelp"),
        autoCalc: document.getElementById("autoCalc"),
        allowExtrap: document.getElementById("allowExtrap"),

        btnCalcular: document.getElementById("btnCalcular"),
        btnLimpiar: document.getElementById("btnLimpiar"),
        btnCalcularBottom: document.getElementById("btnCalcularBottom"),
        btnLimpiarBottom: document.getElementById("btnLimpiarBottom"),
        btnResetState: document.getElementById("btnResetState"),

        alertError: document.getElementById("alertError"),
        alertWarning: document.getElementById("alertWarning"),

        resultado: document.getElementById("resultado"),
        resTitulo: document.getElementById("resTitulo"),
        resSubtitulo: document.getElementById("resSubtitulo"),
        outAltura: document.getElementById("outAltura"),
        outAlturaSub: document.getElementById("outAlturaSub"),
        outLitros: document.getElementById("outLitros"),
        outLitrosSub: document.getElementById("outLitrosSub"),
        outVacio: document.getElementById("outVacio"),
        outVacioSub: document.getElementById("outVacioSub"),
        outPct: document.getElementById("outPct"),
        outPctSub: document.getElementById("outPctSub"),
        toast: document.getElementById("toast"),

        tablaDatos: document.getElementById("tablaDatos"),
        btnTablaCsv: document.getElementById("btnTablaCsv"),
        filtroCampo: document.getElementById("filtroCampo"),
        filtroValor: document.getElementById("filtroValor"),
        btnFiltroLimpiar: document.getElementById("btnFiltroLimpiar"),

        historial: document.getElementById("historial"),
        btnHistClear: document.getElementById("btnHistClear"),
        btnHistCsv: document.getElementById("btnHistCsv"),
        btnHistCopy: document.getElementById("btnHistCopy"),

        detailsTable: document.getElementById("detailsTable"),
        detailsHistory: document.getElementById("detailsHistory"),

        anio: document.getElementById("anio"),
      };

      const nf2 = new Intl.NumberFormat("es-CO", { maximumFractionDigits: 2 });

      function parseNumber(value){
        const s = String(value ?? "").trim().replace(/\s+/g, "").replace(",", ".");
        if (!s) return NaN;
        const n = Number(s);
        return Number.isFinite(n) ? n : NaN;
      }

      function showError(msg){
        el.alertError.textContent = msg;
        el.alertError.hidden = false;
      }
      function clearError(){
        el.alertError.hidden = true;
        el.alertError.textContent = "";
      }
      function showWarning(msg){
        el.alertWarning.textContent = msg;
        el.alertWarning.hidden = false;
      }
      function clearWarning(){
        el.alertWarning.hidden = true;
        el.alertWarning.textContent = "";
      }
      function toast(msg){ el.toast.textContent = msg; }

      function downloadFile(filename, mime, content){
        const blob = new Blob([content], { type: mime });
